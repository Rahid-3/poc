<div class="content-wrapper">
    <!-- Content Header (Page header) -->
    <section class="content-header">
        <div class="container-fluid">
            <div class="row mb-2">
                <div class="col-sm-6">
                    <h1>Shopify 2k Variants Creation</h1>
                </div>
                <div class="col-sm-6">
                    <ol class="breadcrumb float-sm-right">
                        <li class="breadcrumb-item"><a href="index.php">Home</a></li>
                        <li class="breadcrumb-item active">Shopify 2k Variants Creation</li>
                    </ol>
                </div>
            </div>
        </div>
    </section>

    <section class="content">

        <div class="card">
            <div class="card-header">
                <h3 class="card-title">Shopify 2k Variants Creation</h3>

                <div class="card-tools">
                    <button type="button" class="btn btn-default btn-xs" id="add_new_btn">Add Product</button>
                </div>
            </div>
            <div class="card-body">
                <div class="inex_overlay" id="inex_overlay">
                    <i class="inex_overlay_loader fas fa-2x fa-sync-alt fa-spin"></i>
                </div>
                <div>
                    <input type="hidden" id="action" value="get_product_info_list_post">
                </div>
                <div class="row">
                    <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                        <div id="master_div_product">
                            <!-- Placeholder for the product form -->
                             <table class="table table-bordered table-hover"><thead><tr><th>#</th><th>Student Name</th><th>Email</th><th>Mobile</th><th>Date</th><th>Actions</th></tr></thead><tbody><tr><td>1</td><td>Ranbir Kapoor</td><td>ranbir@gmail.com</td><td>8888888888</td><td>11 Sep 2024</td><td><button type="button" class="btn btn-primary btn-xs edit-student-btn" data-id="17" data-student="Ranbir Kapoor" data-email="ranbir@gmail.com" data-mobile="8888888888" fdprocessedid="eiv21">Edit</button> <button type="button" class="btn btn-danger btn-xs delete-student-btn" data-id="17" fdprocessedid="4otvwi">Delete</button></td></tr><tr><td>2</td><td>Sunny</td><td>sanny@gmail.com</td><td>1234567890</td><td>11 Sep 2024</td><td><button type="button" class="btn btn-primary btn-xs edit-student-btn" data-id="16" data-student="Sunny" data-email="sanny@gmail.com" data-mobile="1234567890" fdprocessedid="5wnzct">Edit</button> <button type="button" class="btn btn-danger btn-xs delete-student-btn" data-id="16" fdprocessedid="j6cr6y">Delete</button></td></tr><tr><td>3</td><td>Gulsan</td><td>gulsan@gmail.com</td><td>8888888888</td><td>11 Sep 2024</td><td><button type="button" class="btn btn-primary btn-xs edit-student-btn" data-id="15" data-student="Gulsan" data-email="gulsan@gmail.com" data-mobile="8888888888" fdprocessedid="qb922b">Edit</button> <button type="button" class="btn btn-danger btn-xs delete-student-btn" data-id="15" fdprocessedid="fwj68y">Delete</button></td></tr><tr><td>4</td><td>Sonu Sood</td><td>sonu@gmail.com</td><td>1234567890</td><td>10 Sep 2024</td><td><button type="button" class="btn btn-primary btn-xs edit-student-btn" data-id="14" data-student="Sonu Sood" data-email="sonu@gmail.com" data-mobile="1234567890" fdprocessedid="ms831h">Edit</button> <button type="button" class="btn btn-danger btn-xs delete-student-btn" data-id="14" fdprocessedid="865zq">Delete</button></td></tr><tr><td>5</td><td>Amir Khan</td><td>amir@gmail.com</td><td>8888888888</td><td>21 Jun 1975</td><td><button type="button" class="btn btn-primary btn-xs edit-student-btn" data-id="13" data-student="Amir Khan" data-email="amir@gmail.com" data-mobile="8888888888" fdprocessedid="kdbl3">Edit</button> <button type="button" class="btn btn-danger btn-xs delete-student-btn" data-id="13" fdprocessedid="w3gkc">Delete</button></td></tr><tr><td>6</td><td>Aliya</td><td>aliya@gmail.com</td><td>8888888888</td><td>21 Jun 1975</td><td><button type="button" class="btn btn-primary btn-xs edit-student-btn" data-id="12" data-student="Aliya" data-email="aliya@gmail.com" data-mobile="8888888888" fdprocessedid="3sob68">Edit</button> <button type="button" class="btn btn-danger btn-xs delete-student-btn" data-id="12" fdprocessedid="mpctgo">Delete</button></td></tr><tr><td>7</td><td>Kartik Aryan</td><td>kartik@gmail.com</td><td>8888888888</td><td>04 Sep 2024</td><td><button type="button" class="btn btn-primary btn-xs edit-student-btn" data-id="11" data-student="Kartik Aryan" data-email="kartik@gmail.com" data-mobile="8888888888" fdprocessedid="p892y2">Edit</button> <button type="button" class="btn btn-danger btn-xs delete-student-btn" data-id="11" fdprocessedid="4ioodg">Delete</button></td></tr><tr><td>8</td><td>Ajay</td><td>ajay@gmail.com</td><td>8888888888</td><td>04 Sep 2024</td><td><button type="button" class="btn btn-primary btn-xs edit-student-btn" data-id="10" data-student="Ajay" data-email="ajay@gmail.com" data-mobile="8888888888" fdprocessedid="kzg7bg">Edit</button> <button type="button" class="btn btn-danger btn-xs delete-student-btn" data-id="10" fdprocessedid="x8wwma">Delete</button></td></tr><tr><td>9</td><td>Devi</td><td>devi@gmail.com</td><td>8888888888</td><td>04 Sep 2024</td><td><button type="button" class="btn btn-primary btn-xs edit-student-btn" data-id="9" data-student="Devi" data-email="devi@gmail.com" data-mobile="8888888888" fdprocessedid="53c5uc">Edit</button> <button type="button" class="btn btn-danger btn-xs delete-student-btn" data-id="9" fdprocessedid="l3qabc">Delete</button></td></tr><tr><td>10</td><td>Adam</td><td>adam@gmail.com</td><td>8888888888</td><td>04 Sep 2024</td><td><button type="button" class="btn btn-primary btn-xs edit-student-btn" data-id="5" data-student="Adam" data-email="adam@gmail.com" data-mobile="8888888888" fdprocessedid="gp9vo6">Edit</button> <button type="button" class="btn btn-danger btn-xs delete-student-btn" data-id="5" fdprocessedid="66xhy">Delete</button></td></tr></tbody></table>


                        </div>
                    </div>
                </div>
            </div>
        </div>

    </section>
</div>

<!-- Form HTML (to be dynamically added) -->
<script id="add-product-form-template" type="text/x-handlebars-template">
    <div class="card">
        <div class="card-header">
            <h4>Add Shopify 2k Variants Creation</h4>
            <button type="button" class="close" id="close_form">
                <span aria-hidden="true">&times;</span>
            </button>
        </div>
        <div class="card-body">
            <form class="form-horizontal" enctype="multipart/form-data">
                <input type="hidden" name="action" value="add_new_product_info">

                <div class="form-group row">
                    <label for="language" class="col-sm-2 col-form-label">Shop</label>
                    <div class="col-sm-10">
                        <select class="form-control" name="pro_shop" id="pro_shop">
                            <option value="">Select Shop</option>
                            <option value="Product 1">Shop 1</option>
                            <option value="Product 2">Shop 2</option>
                            <option value="Product 3">Shop 3</option>
                        </select>
                    </div>
                </div>

                <div class="form-group row">
                    <label for="language" class="col-sm-2 col-form-label">Product Title</label>
                    <div class="col-sm-10">
                        <input type="text" class="form-control" name="pro_title" id="pro_title" placeholder="Product Title">
                    </div>
                </div>

                <div class="form-group row">
                    <label for="language" class="col-sm-2 col-form-label">Product Description</label>
                    <div class="col-sm-10">
                        <input type="text" class="form-control" name="pro_desc" id="pro_desc" placeholder="Product Description">
                    </div>
                </div>

                <div class="form-group row">
                    <label for="language" class="col-sm-2 col-form-label">Product Description</label>
                    <div class="col-sm-10">
                        <input type="text" id="textField" placeholder="Enter text with commas">
                        <!-- <div id="tagContainer"></div> -->
                    </div>
                </div>

                <div class="form-group row">
                    <div class="col-sm-12 text-center">
                        <button type="submit" class="btn btn-info">Add Product</button>
                        <button type="button" class="btn btn-danger" id="close_form">Cancel</button>
                    </div>
                </div>
            </form>
        </div>
    </div>

<script>
  $(document).ready(function() {
    $('#textField').on('input', function() {
      var tags = $(this).val().split(',');
      var tagContainer = $('#tagContainer');
      tagContainer.empty();
      $.each(tags, function(index, tag) {
        tagContainer.append('<span class="tag">' + tag.trim() + '</span>');
      });
    }
  });
</script>

<script>
$(document).ready(function() {
    var currentURL = window.location.href;

    $("#add_new_btn").click(function() {
        // Change the URL without reloading
        var newUrl = "index.php?do=addproduct";
        history.pushState({page: "addproduct"}, "Add Product", newUrl);

        // Show the form inline by loading the template
        var template = $("#add-product-form-template").html();
        $("#master_div_product").html(template);
    });

    // Handle back button click (or close form)
    $(document).on('click', '#close_form', function() {
        // Revert to the original URL
        history.pushState({page: "product"}, "Products", currentURL);

        // Remove the form and show the product list
        $("#master_div_product").html('');
    });

    // Handle browser back button
    window.onpopstate = function(event) {
        if (event.state && event.state.page === "product") {
            $("#master_div_product").html('');
        } else if (event.state && event.state.page === "addproduct") {
            var template = $("#add-product-form-template").html();
            $("#master_div_product").html(template);
        }
    };
});
</script>
